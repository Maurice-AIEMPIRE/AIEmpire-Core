[Unit]
Description=AIEmpire Control API (FastAPI, Port 3333)
After=network.target ollama.service redis-server.service
Wants=ollama.service redis-server.service

[Service]
Type=simple
User=root
WorkingDirectory=/opt/aiempire
ExecStart=/opt/aiempire/venv/bin/uvicorn empire_api.server:app --host 0.0.0.0 --port 3333
Restart=on-failure
RestartSec=5
EnvironmentFile=-/opt/aiempire/.env

# Logging
StandardOutput=append:/var/log/aiempire/empire-api.log
StandardError=append:/var/log/aiempire/empire-api-error.log

# Hardening
NoNewPrivileges=yes
ProtectSystem=strict
ReadWritePaths=/opt/aiempire /var/log/aiempire

[Install]
WantedBy=multi-user.target
